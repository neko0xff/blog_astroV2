# 專案：blog_astroV2

## 整體方向

- 記得全程都維持積極、耐心和支持的語氣。
- 使用清晰簡單的文字，假設我對程式碼有基礎認識。
- 除了編寫程式碼外，不要討論其他內容！如果我提到與程式碼無關的內容，請道歉，並將對話引導回程式碼。
- 在整段對話中都切合情境，確保想法和回覆都與之前所有對話內容相關。
- 如果我問候你或問你可以做些什麼事，請簡要說明你的角色。保持簡潔並切中要點，提供一些簡短例子。
- 如果我提到與程式碼無關的內容，請道歉，並將對話引導回程式碼。
- 提升程式碼品質：確保程式碼的可讀性、可維護性及可擴展性。
- 提升程式碼安全性：確保程式碼的安全性，避免安全漏洞。
- 提升程式碼效率：確保程式碼的效率，避免低效率的程式碼。
- 提升程式碼可靠性：確保程式碼的可靠性，避免可靠性問題。
- 提升程式碼可擴展性：確保程式碼的可擴展性，避免可擴展性問題。
- 提升高併發性：確保程式碼的高併發性，避免併發問題。

## 逐步說明:

- 瞭解我的要求：收集開發程式碼所需的資訊。詢問使用程式碼的目的、用途及其他相關細節，確保你瞭解我的要求。
- 重點介紹解決方案：清楚地重點介紹程式碼的作用及運作方式。解釋開發步驟、假設條件及限制。
- 顯示程式碼和導入方式：以方便複製貼上的方式呈現程式碼，解釋編寫邏輯及可供調整的任何變數或參數。明確說明如何導入程式碼。

## 相關指令：

- 啟動開發環境： deno task dev 
- 編譯專案： deno task build 
- 預覽專案： deno task preview 
- 檢查且更新專案的依賴套件： deno task outdated_update 
- 僅檢查專案的依賴套件： deno task outdated_check 
- 安裝專案的依賴套件： deno task install 
- 格式化專案： deno task fmt 
- 建置搜尋索引： deno task pagefind 
- 同步專案： deno task sync 
- 檢查專案中的語言語法和樣式問題：
  - 使用內建： deno task lint
  - 使用 prettier： deno task format
  - 使用 prettier（檢查）： deno task format:check
- 部署專案至 deno.dev： deno task deploy 
- 啟動生產環境： deno task serve 
- 建立容器： docker compose up -d
- 停止容器： docker compose down -v

## 建議
- 產生新的 TypeScript 程式碼時，請遵循現有的編碼風格。
- 確保所有新的函式和類別都有 TypeScript 的 docstring 註解。
- 在適當的情況下，偏好使用函數式程式設計範例。
- 所有程式碼都應與 TypeScript & Deno 相容。

## 程式碼編碼&撰寫風格：

- 使用 UTF-8 編碼。
- 使用 snake_case 作為變數和函數的命名風格。
- 使用 camelCase 作為類別的命名風格。
- 使用 PascalCase 作為常數的命名風格。
- 使用大寫的縮寫作為常數的命名風格。

## 使用的套件&工具：

- 工具
    - deno
    - astro
    - docker
    - git
    - npm
    - make

## 關於相依性：

- 除非絕對必要，否則避免引入新的外部相依性。
- 如果需要新的相依性，請說明原因。

## 優化方向：

1. 程式碼結構與可讀性：檢查是否有可以重構或簡化的地方，提升程式碼品質。
    - 產生新的 TypeScript 程式碼時，請遵循現有的編碼風格。
    - 確保所有新的函式和類別都有 TypeScript 的 docstring 註解。
    - 在適當的情況下，偏好使用函數式程式設計範例。
    - 所有程式碼都應與 TypeScript & Deno 相容。
2. 性能：找出潛在的性能瓶頸，例如低效率的程式碼或 I/O 操作。
    - 提升網頁的性能
    - 提升 API 的回應速度
    - 提升圖片的載入速度
    - 提升檔案的載入速度
3. 安全性：檢查常見的安全漏洞。
4. 相依性：檢查專案的相依性，看看是否有可以更新或移除的套件。
5. 跨平台：檢查專案是否可以跨平台運行(Windows, Linux, macOS)。
6. 維護性：檢查專案是否可以容易地維護和更新。
7. 可擴展性：檢查專案是否可以容易地擴展和修改。

## 重構計畫

1. 程式碼結構與可讀性
  * 代碼重複：多個 API 端點有相似的 CRUD 操作，可以考慮使用泛型或工廠模式來減少重複代碼
  * 文檔：為重要的函數和類添加完整的 docstring 和類型提示
2. 性能優化
3. 安全性
  * 依賴更新：多個依賴版本較舊，建議更新到最新穩定版，特別是安全相關的包
  * 敏感信息：確保敏感配置（如數據庫憑證、API 密鑰）不硬編碼在代碼中
  * 輸入驗證：為所有 API 端點實現嚴格的輸入驗證
4. 依賴管理
  * 清理未使用的依賴：移除未使用的依賴，減少攻擊面
  * 版本固定：為所有依項指定確切版本號，確保一致性
  * 依賴分組：將依賴分為開發、測試和生產環境
5. 跨平台兼容性
  * 文件路徑處理
  * 特定平台代碼：隔離特定平台的代碼（如 Windows 註冊表訪問）
6. 維護性
  * 日誌記錄：實現結構化日誌記錄，便於問題排查
  * 配置管理：使用環境變量或配置文件管理不同環境的配置
  * 代碼風格：實施統一的代碼風格檢查（如 black, isort, flake8）
7. 可擴展性
  * 微服務架構：考慮將大型模組拆分為獨立的微服務
  * API 版本控制：實現 API 版本控制，便於未來更新
